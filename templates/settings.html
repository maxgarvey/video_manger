<form hx-post="/settings" hx-target="#settings-panel" hx-swap="innerHTML" style="display:flex;flex-direction:column;gap:1rem">
  <h2 style="font-size:0.7rem;text-transform:uppercase;letter-spacing:0.1em;color:#666;margin:0">Settings</h2>

  <label style="display:flex;align-items:center;gap:0.5rem;font-size:0.85rem;cursor:pointer">
    <input type="checkbox" name="autoplay_random" {{if .AutoplayRandom}}checked{{end}}
      style="accent-color:#4a9a4a;width:1rem;height:1rem">
    Autoplay random video on start
  </label>

  <div style="display:flex;flex-direction:column;gap:0.3rem">
    <span style="font-size:0.8rem;color:#aaa">Sort videos by</span>
    <label style="display:flex;align-items:center;gap:0.4rem;font-size:0.85rem;cursor:pointer">
      <input type="radio" name="video_sort" value="name" {{if eq .VideoSort "name"}}checked{{end}}> Name
    </label>
    <label style="display:flex;align-items:center;gap:0.4rem;font-size:0.85rem;cursor:pointer">
      <input type="radio" name="video_sort" value="rating" {{if eq .VideoSort "rating"}}checked{{end}}> Rating (‚≠ê first)
    </label>
  </div>

  <button type="submit" style="background:#2a2a2a;border:1px solid #444;color:#eee;padding:0.4rem 0.8rem;border-radius:4px;cursor:pointer;font-size:0.85rem;align-self:flex-start">Save</button>
</form>

<div style="margin-top:1.5rem;display:flex;flex-direction:column;gap:0.5rem">
  <h2 style="font-size:0.7rem;text-transform:uppercase;letter-spacing:0.1em;color:#666;margin:0">LAN Access</h2>
  <p style="font-size:0.78rem;color:#888">Open on other devices on your network:</p>
  <div id="lan-info" hx-get="/info" hx-trigger="load"
       hx-swap="innerHTML"
       style="font-size:0.82rem"></div>
</div>
<script>
  htmx.on('#lan-info', 'htmx:afterSwap', function(e) {
    try {
      var data = JSON.parse(e.detail.xhr.responseText);
      var items = [];
      if (data.mdns) items.push(data.mdns + ' <span style="color:#666;font-size:0.75rem">(mDNS)</span>');
      (data.addresses || []).forEach(function(a){ items.push(a); });
      var html = items.length
        ? items.map(function(a){
            var href = a.split(' ')[0];
            return '<a href="'+href+'" target="_blank" style="color:#4af;word-break:break-all;display:block">'+a+'</a>';
          }).join('')
        : '<span style="color:#555">No LAN addresses found</span>';
      document.getElementById('lan-info').innerHTML = html;
    } catch(err) {}
  });
</script>
